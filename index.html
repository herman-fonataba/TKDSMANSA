<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fullscreen Toggle Demo</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: Arial, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      transition: background 0.3s ease;
    }

    .container {
      background: white;
      padding: 2rem;
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
      max-width: 600px;
      width: 90%;
      text-align: center;
    }

    h1 {
      color: #333;
      margin-bottom: 1.5rem;
      font-size: 2rem;
    }

    p {
      color: #666;
      line-height: 1.6;
      margin-bottom: 1rem;
    }

    .card {
      background: #f5f5f5;
      padding: 1.5rem;
      border-radius: 10px;
      margin: 1.5rem 0;
    }

    /* Tombol Fullscreen */
    #fullscreenToggle {
      position: fixed;
      bottom: 30px;
      right: 30px;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: #667eea;
      border: none;
      color: white;
      font-size: 24px;
      cursor: pointer;
      box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
      transition: all 0.3s ease;
      z-index: 1000;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    #fullscreenToggle:hover {
      transform: scale(1.1);
      background: #764ba2;
      box-shadow: 0 6px 20px rgba(118, 75, 162, 0.5);
    }

    #fullscreenToggle.normal {
      background: #48bb78;
      box-shadow: 0 4px 15px rgba(72, 187, 120, 0.4);
    }

    #fullscreenToggle.normal:hover {
      background: #38a169;
    }

    /* Tooltip */
    #fullscreenToggle::after {
      content: attr(title);
      position: absolute;
      bottom: 70px;
      right: 0;
      background: rgba(0,0,0,0.8);
      color: white;
      padding: 5px 10px;
      border-radius: 5px;
      font-size: 14px;
      white-space: nowrap;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }

    #fullscreenToggle:hover::after {
      opacity: 1;
      visibility: visible;
    }

    /* Style untuk mode fullscreen */
    :-webkit-full-screen {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }

    :-moz-full-screen {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }

    :fullscreen {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }

    /* Responsive */
    @media (max-width: 768px) {
      h1 {
        font-size: 1.5rem;
      }
      
      .container {
        padding: 1.5rem;
      }
      
      #fullscreenToggle {
        width: 50px;
        height: 50px;
        font-size: 20px;
        bottom: 20px;
        right: 20px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Demo Fullscreen Toggle</h1>
    
    <div class="card">
      <h2>Apa itu Fullscreen API?</h2>
      <p>Fullscreen API memungkinkan elemen web ditampilkan secara fullscreen, memberikan pengalaman yang lebih imersif kepada pengguna.</p>
    </div>

    <p>Klik tombol di pojok kanan bawah untuk masuk/keluar mode fullscreen.</p>
    
    <div style="margin-top: 2rem; color: #999; font-size: 0.9rem;">
      <p>Tekan ESC atau klik tombol untuk keluar dari mode fullscreen</p>
    </div>
  </div>

  <!-- Tombol Fullscreen -->
  <button id="fullscreenToggle" title="Enter Fullscreen">&#x1F532;</button>

  <script>
    // Versi lengkap dengan vendor prefixes dan event listener
    (function() {
      const button = document.getElementById("fullscreenToggle");
      
      // Vendor prefixes untuk kompatibilitas lintas browser
      const fullscreenAPI = {
        requestFullscreen(element) {
          const request = element.requestFullscreen ||
                          element.webkitRequestFullscreen ||
                          element.mozRequestFullScreen ||
                          element.msRequestFullscreen;
          if (request) return request.call(element);
          return Promise.reject(new Error('Fullscreen API tidak didukung'));
        },
        
        exitFullscreen() {
          const exit = document.exitFullscreen ||
                      document.webkitExitFullscreen ||
                      document.mozCancelFullScreen ||
                      document.msExitFullscreen;
          if (exit) return exit.call(document);
          return Promise.reject(new Error('Fullscreen API tidak didukung'));
        },
        
        get fullscreenElement() {
          return document.fullscreenElement ||
                 document.webkitFullscreenElement ||
                 document.mozFullScreenElement ||
                 document.msFullscreenElement;
        }
      };

      // Fungsi utama toggle fullscreen
      function toggleFullscreen() {
        const element = document.documentElement;

        if (!fullscreenAPI.fullscreenElement) {
          fullscreenAPI.requestFullscreen(element)
            .then(() => {
              updateButtonState(true);
            })
            .catch(err => {
              console.error('Gagal masuk fullscreen:', err);
              alert('Maaf, tidak dapat masuk mode fullscreen');
            });
        } else {
          fullscreenAPI.exitFullscreen()
            .then(() => {
              updateButtonState(false);
            })
            .catch(err => {
              console.error('Gagal keluar fullscreen:', err);
            });
        }
      }

      // Fungsi untuk update tampilan tombol
      function updateButtonState(isFullscreen) {
        if (isFullscreen) {
          button.innerHTML = "&#x1F533;"; // Icon kotak kecil
          button.title = "Exit Fullscreen";
          button.classList.add("normal");
        } else {
          button.innerHTML = "&#x1F532;"; // Icon fullscreen
          button.title = "Enter Fullscreen";
          button.classList.remove("normal");
        }
      }

      // Event listener untuk klik tombol
      button.addEventListener("click", toggleFullscreen);

      // Event listener untuk perubahan fullscreen (misal dari tombol ESC)
      document.addEventListener('fullscreenchange', handleFullscreenChange);
      document.addEventListener('webkitfullscreenchange', handleFullscreenChange);
      document.addEventListener('mozfullscreenchange', handleFullscreenChange);
      document.addEventListener('MSFullscreenChange', handleFullscreenChange);

      function handleFullscreenChange() {
        const isFullscreen = !!fullscreenAPI.fullscreenElement;
        updateButtonState(isFullscreen);
      }

      // Cek dukungan Fullscreen API
      if (!document.fullscreenEnabled && 
          !document.webkitFullscreenEnabled && 
          !document.mozFullScreenEnabled && 
          !document.msFullscreenEnabled) {
        button.style.display = 'none';
        console.warn('Browser Anda tidak mendukung Fullscreen API');
        
        // Tampilkan pesan ke user
        const warning = document.createElement('div');
        warning.style.cssText = `
          position: fixed;
          bottom: 30px;
          right: 30px;
          background: #f56565;
          color: white;
          padding: 10px 20px;
          border-radius: 5px;
          font-size: 14px;
          box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        `;
        warning.textContent = 'Fullscreen tidak didukung di browser ini';
        document.body.appendChild(warning);
        
        setTimeout(() => warning.remove(), 5000);
      }
    })();
  </script>
</body>
</html>
